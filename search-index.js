crystal_doc_search_index_callback({"repository_name":"myip","body":"# myip\n\n返回本机的公网 IP 以及访问外网的公网 IP，使用 http://www.ip138.com 以及 http://ib.sb/geoip 提供的服务。\n查看[文档](https://crystal-china.github.io/myip/)获取更多帮助\n\n```sh\n ╰─ $ bin/myip \n ╰─ $ myip\nip138.com：您的iP地址是：[1.2.3.4 ] 来自：中国广东 联通\nip.sb/geoip：您访问外网地址信息：\n{\"organization\" => \"Khalid Group\",\n \"longitude\" => -3.684,\n \"timezone\" => \"Europe/Madrid\",\n \"isp\" => \"Khalid Group\",\n \"offset\" => 3600,\n \"asn\" => 147291,\n \"asn_organization\" => \"KHALID GROUP\",\n \"country\" => \"Spain\",\n \"ip\" => \"5.6.7.8\",\n \"latitude\" => 40.4172,\n \"continent_code\" => \"EU\",\n \"country_code\" => \"ES\"}\n```\n\n## Contributing\n\n1. Fork it (<https://github.com/crystal-china/myip/fork>)\n2. Create your feature branch (`git checkout -b my-new-feature`)\n3. Commit your changes (`git commit -am 'Add some feature'`)\n4. Push to the branch (`git push origin my-new-feature`)\n5. Create a new Pull Request\n\n## Contributors\n\n- [Billy.Zheng](https://github.com/zw963) - creator and maintainer\n","program":{"html_id":"myip/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"locations":[],"repository_name":"myip","program":true,"enum":false,"alias":false,"const":false,"types":[{"html_id":"myip/Myip","path":"Myip.html","kind":"class","full_name":"Myip","name":"Myip","abstract":false,"superclass":{"html_id":"myip/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"myip/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"myip/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/myip.cr","line_number":6,"url":"https://github.com/crystal-china/myip/blob/v0.4.6/src/myip.cr#L6"},{"filename":"src/myip/version.cr","line_number":1,"url":"https://github.com/crystal-china/myip/blob/v0.4.6/src/myip/version.cr#L1"}],"repository_name":"myip","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"VERSION","name":"VERSION","value":"{{ (`shards version \\\"/home/runner/work/myip/myip/src/myip\\\"`).chomp.stringify }}"}],"instance_methods":[{"html_id":"chan:Channel({String,String})-instance-method","name":"chan","abstract":false,"location":{"filename":"src/myip.cr","line_number":7,"url":"https://github.com/crystal-china/myip/blob/v0.4.6/src/myip.cr#L7"},"def":{"name":"chan","visibility":"Public","body":"@chan"}},{"html_id":"get_ip_from_ib_sb-instance-method","name":"get_ip_from_ib_sb","abstract":false,"location":{"filename":"src/myip.cr","line_number":9,"url":"https://github.com/crystal-china/myip/blob/v0.4.6/src/myip.cr#L9"},"def":{"name":"get_ip_from_ib_sb","visibility":"Public","body":"spawn do\n  begin\n    url = \"https://api.ip.sb/geoip\"\n    response = HTTP::Client.get(url)\n    result = JSON.parse(response.body)\n    io = IO::Memory.new\n    PrettyPrint.format(result, io, 79)\n    io.rewind\n    chan.send({\"ip.sb/geoip：您访问外网地址信息：\\n\", io.gets_to_end})\n  rescue ex : ArgumentError | Socket::Error\n    chan.send({\"ip.sb/geoip：\", ex.message.not_nil!})\n  end\nend"}},{"html_id":"get_ip_from_ip138-instance-method","name":"get_ip_from_ip138","abstract":false,"location":{"filename":"src/myip.cr","line_number":23,"url":"https://github.com/crystal-china/myip/blob/v0.4.6/src/myip.cr#L23"},"def":{"name":"get_ip_from_ip138","visibility":"Public","body":"spawn do\n  begin\n    url = \"http://www.ip138.com\"\n    doc = from_url(url, follow: true)\n    ip138_url = (doc.css(\"iframe\")).first.attribute_by(\"src\")\n    url = \"http:#{ip138_url}\"\n    doc = from_url(url)\n    chan.send({\"ip138.com：\", (doc.css(\"body p\")).first.tag_text.strip})\n  rescue ex : ArgumentError | Socket::Error\n    chan.send({\"ip138.com：\", ex.message.not_nil!})\n  end\nend"}},{"html_id":"process-instance-method","name":"process","abstract":false,"location":{"filename":"src/myip.cr","line_number":37,"url":"https://github.com/crystal-china/myip/blob/v0.4.6/src/myip.cr#L37"},"def":{"name":"process","visibility":"Public","body":"2.times do\n  select\nwhen value = chan.receive\n    title, ip = value\n    STDERR.puts(\"#{title}#{ip}\")\nwhen timeout(5.seconds)\n    STDERR.puts(\"Timeout, check your network connection!\")\n    exit\nend\n\nend"}}]}]}})